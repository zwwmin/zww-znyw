define("p.Intelligent_warning",function(a,b,c){var d=new EJS({url:"/res/Intel_ejs/intel_warning.ejs"}),e=new EJS({url:"/res/Intel_ejs/intel_empty.ejs"}),f=new EJS({url:"/res/Intel_ejs/inel_warning_total.ejs"}),g=$("#pager"),h=$("#warning-footer"),i=$("#warning_total"),j=$("#submit_btn"),k=1,l={pageIndex:1,pageSize:20,level:"",stime:"",etime:""},m={init:function(){var a=this;a.gotoPage(),a.pierChartPart(),a._WarningClick(),k=1},gotoPage:function(a){var b=this;i.hide(),l.pageIndex=a,k=a,$.ajax({url:"/Intelligent/v5_SmartGetStationAlarmInfoForPc",data:l,method:"post",success:function(a){var c=parseInt(a.total),d=10,e=1,f=0;0>=c?($("#pager").hide(),b._renderTotal(a)):($("#pager").show(),e=parseInt(a.pageIndex),d=parseInt(d),f=util.getTotalPages(d,c),b._renderTotal(a),b._renderPager(f,e)),$('[ui="total-count"]').text(c),setTimeout(function(){i.fadeIn()},500)},error:function(){}})},pierChartPart:function(){var a=this;$.ajax({url:"/Intelligent/v5_SmartAlarmRanking",data:{},method:"post",success:function(b){a._renderList(b)},error:function(){}})},_renderList:function(a){if(0!=a.code||void 0==a.data||void 0==a){var b=e.render({data:a.data});return void h.empty().append(b)}var b=d.render({data:a.data});h.empty().append(b)},_renderTotal:function(a){if(0!=a.code||void 0==a||0==a.total){var b=e.render({data:a.data});return void i.empty().append(b)}var b=f.render({data:a.data});i.empty().append(b)},_WarningClick:function(){var a=this;$("#warning_choose li a").click(function(){l.level=$(this).data("value"),$(this).parent().addClass("acs"),$(this).parent().siblings().removeClass("acs"),a.gotoPage()}),j.click(function(){return""==$("#stimes").val()||""==$("#etimes").val()?void alert("请选择时间"):(l.stime=$("#stimes").val(),l.etime=$("#etimes").val(),console.log(l),void a.gotoPage())}),$(".pagination li a").on("click",function(){alert($(this).data("value"))})},_renderPager:function(a,b){var c=this;g.empty();var d=$("#small-pager"),e=$('[ui="total-pages"]'),f=$('[ui="current-page"]');f.text(b),e.text(a);var h=d.find('[ui="pre-page"]'),i=d.find('[ui="next-page"]');if(b>=a?i.unbind("click").removeClass("disable").addClass("disable"):(i.unbind("click").removeClass("disable"),i.unbind("click").click(function(){var a=b+1;c.gotoPage(a,function(){})})),1>=b?h.unbind("click").removeClass("disable").addClass("disable"):(h.unbind("click").removeClass("disable"),h.unbind("click").click(function(){var a=b-1;c.gotoPage(a,function(){})})),1>=a)return void g.empty();new iPager({totalPages:a,currentPage:b,container:g,onRender:function(a){$(a).find('[ui="pager-item"]').click(function(){var a=$(this).attr("pageIndex");c.gotoPage(a,function(){})})}})},showTip:function(a,b){var c=$("<div>");$("body").append(c),c.addClass("showtips"),c.text(a),window.setTimeout(function(){c.addClass("active")},10),g_tips=window.setTimeout(function(){$(".showtips").remove(),b&&b()},3e3)}};c.exports=m});