define("p.informationlist",["p.all"],function(a,b,c){var d={},e=util.getQueryObject(),f=a("p.all"),g=$("#panel-loading"),h=$("#information_container"),i=$("#inner_news_list"),j=$("#pager"),k=new EJS({url:"/res/template/tpl_informationlist_item.ejs"}),l=new WebUI,m=1,n={init:function(a){$.extend(d,a);var b=this;f.timer(),b.initEvents(),b.initSearchBar(),b.initInnerSearcher(),m=d.page,b.gotoPage(m,function(){})},initSearchBar:function(){var a=$('[ui="param-option"]');a.click(function(){var a=$(this).attr("param"),b=$(this).attr("value");e[a]=b;var c=util.Json2URL("/information",e);history.replaceState?(history.replaceState("","",c),location.reload()):location.href=c})},initEvents:function(){},initInnerSearcher:function(){var a=this,b={};$.extend(b,e),$('[ui="class-type"]').click(function(){$(this).addClass("cur").siblings().removeClass("cur"),a.gotoPage(1,function(){})})},getSearchParas:function(a){var b={};return $.extend(b,e),b.dataType="json",console.log(a),b.page=a,$('[ui="class-type"]').each(function(){$(this).hasClass("cur")&&(b.cate_id=$(this).attr("cate_id"))}),b},_renderList:function(a){if(void 0==a||void 0==a.data||void 0==a.data.list){var b=l.createEmptyPanel({message:"暂无相关资讯"});return void i.empty().append(b)}var b=k.render({pageData:a});i.empty().append(b)},_renderPager:function(a,b){var c=this;j.empty();var d=$("#small-pager"),e=$('[ui="total-pages"]'),f=$('[ui="current-page"]');f.text(b),e.text(a);var g=d.find('[ui="pre-page"]'),h=d.find('[ui="next-page"]');if(b>=a?h.unbind("click").removeClass("disable").addClass("disable"):(h.unbind("click").removeClass("disable"),h.unbind("click").click(function(){var a=b+1;c.gotoPage(a,function(){})})),1>=b?g.unbind("click").removeClass("disable").addClass("disable"):(g.unbind("click").removeClass("disable"),g.unbind("click").click(function(){var a=b-1;c.gotoPage(a,function(){})})),1>=a)return void j.empty();new iPager({totalPages:a,currentPage:b,container:j,onRender:function(a){$(a).find('[ui="pager-item"]').click(function(){var a=$(this).attr("pageIndex");c.gotoPage(a,function(){})})}})},gotoPage:function(a){var b=this;h.hide(),g.show();var c=b.getSearchParas(a);console.log(c),m=a,$.ajax({url:"/information",data:c,method:"get",dataType:"json",success:function(a){var c=parseInt(a.data.count),d=7,e=1,f=0;0>=c?b._renderList(void 0):(e=parseInt(a.searchParams.page),d=parseInt(d),f=util.getTotalPages(d,c),b._renderList(a),b._renderPager(f,e)),$('[ui="total-count"]').text(c),setTimeout(function(){g.hide(),h.fadeIn()},500)},error:function(){}})}};c.exports=n});