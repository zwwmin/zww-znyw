define("p.Intelligent_energy",function(a,b,c){var d={},e={transformerId:0,timeType:1},f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[{value:0,name:"峰"},{value:0,name:"平"},{value:0,name:"谷"}],n=[{value:0,name:"峰"},{value:0,name:"平"},{value:0,name:"谷"}],o={init:function(a){var b=this;$.extend(d,a),b.pierChartEvent(e),b._WarningClick()},pierChartEvent:function(a){var b=this;a.transformerId=$("#site").val(),$.ajax({url:"/user/v5_SmartTotalEnergy",data:a,method:"post",success:function(a){console.log(a),0==a.code?(b.AnalysisTotal(a.data.zong),b.AnalysisMovements(a.data.zoushi)):alert(a.msg)},error:function(){}})},_WarningClick:function(){var a=this;$("#warning_choose li div").click(function(){e.timeType=$(this).data("value"),$(this).parent().addClass("acs"),$(this).parent().siblings().removeClass("acs"),a.pierChartEvent(e)}),$("#site").change(function(){a.pierChartEvent(e)}),layui.use(["form"],function(){var b=layui.form;b.on("select(test)",function(){a.pierChartEvent(e)})})},AnalysisTotal:function(a){var b=this;m=[{value:0,name:"峰"},{value:0,name:"平"},{value:0,name:"谷"}],n=[{value:0,name:"峰"},{value:0,name:"平"},{value:0,name:"谷"}];for(var c=0;c<a.length;c++){for(var d=a[c],e=0;e<m.length;e++){var f=m[c];d.typeName==f.name&&(f.value=d.totalEneryAmount)}for(var g=0;g<n.length;g++){var h=n[g];d.typeName==h.name&&(h.value=d.totalPrice)}}b.TotalRendering()},AnalysisMovements:function(a){var b=this;f=[],g=[],h=[],i=[],j=[],k=[],l=[];for(var c=0;c<a.length;c++){var d=a[c];f.push(d.fengPrice),g.push(d.pingPrice),h.push(d.guPrice),i.push(d.totalPrice),j.push(d.avePrice),l.push(d.totalEneryAmount),k.push(d.date)}b.trendRendering()},TotalRendering:function(){for(var a=0,b=0;b<m.length;b++)a+=parseInt(m[b].value);for(var c=0,d=0;d<n.length;d++)c+=parseInt(n[d].value);var e=echarts.init(document.getElementById("energy-ring1")),f={title:{text:a,subtext:"kwh",x:"center",y:"center",textStyle:{fontWeight:"normal",fontSize:26}},tooltip:{show:!0,trigger:"item",formatter:"{a} <br/>{b}: {c}kWh({d}%)"},color:["#f5a623","#66cc99","#1fbcec"],series:[{name:"总用电费",type:"pie",label:{normal:{show:!0,formatter:"{b}: {c}kWh({d}%)"}},radius:["45%","70%"],avoidLabelOverlap:!1,data:m}]};e.setOption(f);var g=echarts.init(document.getElementById("energy-ring2")),h={title:{text:c,subtext:"元",x:"center",y:"center",textStyle:{fontWeight:"normal",fontSize:26}},color:["#f5a623","#66cc99","#1fbcec"],tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c}元({d}%)"},label:{normal:{formatter:"{b}\n{d}%"}},series:[{name:"总电量电费",type:"pie",label:{normal:{show:!0,formatter:"{b}: {c}元({d}%)"}},radius:["45%","70%"],avoidLabelOverlap:!1,data:n}]};g.setOption(h),window.addEventListener("resize",function(){g.resize(),e.resize()})},trendRendering:function(){var a=echarts.init(document.getElementById("energy-line")),b={legend:{data:["峰","平","谷","总电费","平均电度电费"]},tooltip:{trigger:"axis",formatter:"{b} <br/>{a0}: {c0}&nbsp;kWh<br/>{a1}: {c1}&nbsp;kWh<br/>{a2}:{c2}&nbsp;kWh<br/>{a3}: {c3}&nbsp;元<br/>{a4}: {c4}&nbsp;元",axisPointer:{type:"cross",textStyle:{color:"#fff"}}},grid:{borderWidth:0,top:110,bottom:95,textStyle:{color:"#fff"}},calculable:!0,xAxis:[{type:"category",axisLine:{lineStyle:{color:"#90979c"}},axisLabel:{interval:"auto"},splitLine:{show:!1},axisTick:{show:!1},splitArea:{show:!1},data:k}],yAxis:[{type:"value",name:"电费（元）",splitLine:{show:!0},axisLabel:{formatter:"{value}"},axisLine:{lineStyle:{color:"#90979c"}}},{name:"电价（元）",type:"value",position:"right",splitLine:{show:!1},"default":5,axisLabel:{formatter:"{value}"},axisLine:{lineStyle:{color:"#6c9c94"}}}],series:[{name:"谷",type:"bar",yAxisIndex:0,stack:"电费",itemStyle:{normal:{color:"#1fbcec"}},data:h},{name:"平",type:"bar",yAxisIndex:0,stack:"电费",itemStyle:{normal:{color:"#66cc99"}},data:g},{name:"峰",type:"bar",yAxisIndex:0,stack:"电费",barMaxWidth:35,barGap:"10%",itemStyle:{normal:{color:"#f5a623"}},data:f},{name:"总电费",type:"line",yAxisIndex:0,symbol:"circle",itemStyle:{normal:{color:"#b3c3ce"}},data:i},{name:"平均电度电费",type:"line",stack:"电价",yAxisIndex:1,symbol:"circle",itemStyle:{normal:{color:"#7191fe"}},data:j}]};a.setOption(b),window.onresize=a.resize;var c=echarts.init(document.getElementById("energy-line2")),d={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},grid:{left:"3%",top:"15%",containLabel:!0},legend:{data:["能耗走势"]},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:k}],yAxis:{type:"value"},series:[{name:"能耗走势",type:"line",areaStyle:{normal:{type:"default",color:"#fdedd2"}},smooth:!0,itemStyle:{normal:{areaStyle:{type:"default"}}},data:l}]};c.setOption(d),window.addEventListener("resize",function(){c.resize(),a.resize()})}};c.exports=o});