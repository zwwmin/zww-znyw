define("p.Intelligent_demand",function(a,b,c){var d=new EJS({url:"/res/Intel_ejs/intel_empty.ejs"}),e=new EJS({url:"/res/Intel_ejs/inel_demand_transformer.ejs"}),f=$("#Demand"),g=(new Date).getTime(),h={sid:$("#Selected_sid").data("value"),timestamp:g},i={sid:$("#Selected_sid").data("value"),timestamp:g,jxId:$("#site").val()},j={init:function(){var a=this;a.TranSformer(),a.WholePoint(),a.TimeSelect()},TranSformer:function(){var a=this;$.ajax({url:"/user/v5_SmartMaxDemand",data:h,method:"post",success:function(b){a.TransFormerInsert(b)},error:function(){}})},TransFormerInsert:function(a){if(0!=a.code||void 0==a.data.items||0==a.data.items.length){var b=d.render({});return void f.empty().append(b)}var c=0;for(var g in a.data.items)c+=a.data.items[g].maxLoad;var b=e.render({data:a.data,totalData:c});f.empty().append(b)},WholePoint:function(){var a=this;$.ajax({url:"/user/v5_SmartGetMomentLoad",data:i,method:"post",success:function(b){a.PointData(b),0==b.data.length&&layer.msg("突然没有数据了呢！")},error:function(){}})},PointData:function(a){var b=[],c=[],d=[],e=[];for(var f in a.data)b.push(a.data[f].myhour),c.push(a.data[f].vAvg),d.push(a.data[f].vMax),e.push(a.data[f].vMin);console.log(c);var g=document.getElementById("container"),h=echarts.init(g),i=null;i={backgroundColor:"#ffffff",name:"a",tooltip:{trigger:"axis",show:!0,axisPointer:{lineStyle:{color:"none"}},backgroundColor:"rgba(255, 255, 255, 0.5)",textStyle:{align:"left",fontSize:12,color:"#333333"},extraCssText:"box-shadow: 0 1px 5px 0 rgba(0, 0, 0, 0.2)"},color:["#F5A623","#1FBCEC","#66CC99"],grid:{left:"5%",right:"6%",top:"14%",bottom:"6%",containLabel:!0},legend:{show:!0,icon:"circle",right:20,textStyle:{fontSize:12,color:"#333333"},data:["时段平均负荷","时段最大负荷","时段最小负荷"]},xAxis:{show:!0,type:"category",boundaryGap:!1,data:b},yAxis:{name:"kW",type:"value",axisLabel:{formatter:"{value} "},axisPointer:{snap:!0}},series:[{name:"时段平均负荷",type:"line",symbol:"circle",symbolSize:[10,10],data:c},{name:"时段最大负荷",type:"line",symbol:"circle",symbolSize:[8,8],data:d},{name:"时段最小负荷",type:"line",symbol:"circle",symbolSize:[8,8],data:e}]},i&&"object"==typeof i&&(h.setOption(i,!0),window.addEventListener("resize",function(){h.resize()}))},TimeSelect:function(){var a=this;layui.use(["laydate","form","layer"],function(){var b=layui.laydate,c=layui.form;c.on("select(test)",function(b){console.log(b.value),i.jxId=b.value,a.WholePoint()}),b.render({elem:"#time1",type:"month",theme:"#1fbcec",format:"yyyy-MM",done:function(b){console.log(Date.parse(b)),h.timestamp=Date.parse(b),a.TranSformer()}}),b.render({elem:"#time2",type:"month",theme:"#1fbcec",format:"yyyy-MM",done:function(b){console.log(Date.parse(b)),i.timestamp=Date.parse(b),a.WholePoint()}})})}};c.exports=j});